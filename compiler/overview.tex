The CML compiler's overall architecture follows the standard compiler design literature \cite{torben}. An overview diagram of the architecture is shown in figure \ref{fig:overview}.

\begin{figure}
\centering
\includegraphics[width=\textwidth]{compiler/figure-overview}
\caption{An architectural overview of the CML compiler.}
\label{fig:overview}
\end{figure}

The two main components of the compiler,
and the artifacts they work with,
are presented below.

\subsubsection{The Frontend}
Receives as input the \emph{CML source files}.
It will parse the files and generate an internal representation of the \emph{CML model}.
Syntactical and semantic validations will be executed at this point.
Any errors are presented to the developer, interrupting the progress to the next phase.
If the \emph{source files} are parsed and validated successfully, then an internal representation (AST) of the \emph{CML model} is generated, as shown in subsection \ref{subsec:ast}.
The AST serves then as the input for the \emph{backend} component.

\subsubsection{The Backend}
Receives the \emph{CML model AST} as input.
Based on the \emph{target specification} provided by the AST, chooses which \emph{extensible templates} to use for code generation.
The \emph{target files} are then generated, and become available to be consumed by other tools. The \emph{target specification} plays a key role in order to determine the kind of \emph{target} to be generated, and it is presented in subsection \ref{subsec:templates}.